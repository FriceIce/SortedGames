import{R as l,u as w,b as D,e as y,j as t}from"./index-Rez77Kfo.js";import{o as G,g as v}from"./fetchOptions-BEgALDgg.js";import{u as E}from"./useFetchGamesOnScroll-DUgHJMd1.js";import{G as F}from"./GameCard-CvK8Wrte.js";import R from"./LoadingScreen-DWd9CpfF.js";const I=(o,r)=>{const[i,a]=l.useState(o);return l.useEffect(()=>{const c=setTimeout(()=>a(o),r);return()=>clearTimeout(c)},[o,r]),i},T=(o,r,i,a,c,m)=>{const[d,p]=l.useState([]),[h,g]=l.useState({statusText:"",status:0});return l.useEffect(()=>{(async()=>{if(!m)try{const n=await fetch(o,r&&r);if(!n.ok)return g({statusText:n.statusText,status:n.status});const u=await n.json();p(u),a&&c&&a({type:c,payload:u}),a&&!c&&a(u)}catch(n){console.log(n)}})()},i),{data:d,error:h}},A=({scrollPositionY:o})=>{const[r,i]=l.useState(""),[a,c]=l.useState(!0),m=w(s=>s.games.searchGames),d=w(s=>s.sidemenu.sidemenu),p=D(),h=I(r.trim(),500),g=E(o),j=y("(min-width: 1024px)"),{data:n}=T(v(!1,"games"),G,[],p,"games/cacheSearchResults",m.length>0),u=m.length>0?m:n,N=s=>s.preventDefault(),C=(s,e)=>{var S,L,b;const f=s.toLowerCase(),x=[];return f.length<2?"":e.title.toLocaleLowerCase().includes(f)&&!x.includes(e)||(S=e.genre)!=null&&S.toLocaleLowerCase().includes(f)&&!x.includes(e)||(L=e.platform)!=null&&L.toLocaleLowerCase().includes(f)&&!x.includes(e)||(b=e.publisher)!=null&&b.toLocaleLowerCase().includes(f)&&!x.includes(e)?e:null};return t.jsxs("section",{className:`space-y-6 transition-all duration-200 ${j&&d&&"ml-[210px]"}`,children:[t.jsxs("form",{className:"flex gap-2 items-center border h-[42px] rounded-xl pr-2 w-5/6 mx-auto",onSubmit:N,children:[t.jsx("input",{type:"text",value:r,placeholder:"Search for free games",className:"flex-1 bg-midnightBlue h-full rounded-l-xl px-2 text-xs placeholder:text-sm placeholder:text-gray-200",onChange:s=>i(s.target.value)}),t.jsx("button",{className:"flex-grow-0",children:t.jsx("img",{src:"/SortedGames/icons/search-icon-without-circle.svg",alt:"search icon",className:"size-6"})})]}),t.jsxs("div",{className:"text-xl space-y-2",children:[h&&t.jsxs("h1",{className:"text-base text-center sm:text-lg sm:text-start px-4",children:["Your search: ",h]}),a&&t.jsx("div",{className:"pt-10",children:t.jsx(R,{loader:"smallerLoaderAnimation",position:"static"})}),t.jsx("ul",{className:"card-grid px-4",children:u.map((s,e)=>(e===u.length-1&&a&&c(!1),C(h,s)===null||e>g&&r===""?null:t.jsx("li",{className:"",children:t.jsx(F,{card:s})},e)))})]})]})};export{A as default};

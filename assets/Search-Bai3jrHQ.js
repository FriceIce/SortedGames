const __vite__fileDeps=["assets/GameCard-Dyg88vzY.js","assets/index-CB2Yse53.js","assets/index-Buq4t4YS.css","assets/LoadingScreen-B1y-Mhyj.js","assets/LoadingScreen-Byzhuq5j.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{R as l,r as j,_ as N,u as w,b as C,e as v,j as s}from"./index-CB2Yse53.js";import{o as G,g as R}from"./fetchOptions-BEgALDgg.js";import{u as I}from"./useFetchGamesOnScroll-Ct-rGsyL.js";const T=(o,r)=>{const[u,a]=l.useState(o);return l.useEffect(()=>{const c=setTimeout(()=>a(o),r);return()=>clearTimeout(c)},[o,r]),u},A=(o,r,u,a,c,m)=>{const[f,p]=l.useState([]),[h,g]=l.useState({statusText:"",status:0});return l.useEffect(()=>{(async()=>{if(!m)try{const n=await fetch(o,r&&r);if(!n.ok)return g({statusText:n.statusText,status:n.status});const i=await n.json();p(i),a&&c&&a({type:c,payload:i}),a&&!c&&a(i)}catch(n){console.log(n)}})()},u),{data:f,error:h}},F=j.lazy(()=>N(()=>import("./GameCard-Dyg88vzY.js"),__vite__mapDeps([0,1,2]))),D=j.lazy(()=>N(()=>import("./LoadingScreen-B1y-Mhyj.js"),__vite__mapDeps([3,1,2,4]))),z=({scrollPositionY:o})=>{const[r,u]=l.useState(""),[a,c]=l.useState(!0),m=w(t=>t.games.searchGames),f=w(t=>t.sidemenu.sidemenu),p=C(),h=T(r.trim(),500),g=I(o),L=v("(min-width: 1024px)"),{data:n}=A(R(!1,"games"),G,[],p,"games/cacheSearchResults",m.length>0),i=m.length>0?m:n,y=t=>t.preventDefault(),E=(t,e)=>{var S,_,b;const x=t.toLowerCase(),d=[];return x.length<2?"":e.title.toLocaleLowerCase().includes(x)&&!d.includes(e)||(S=e.genre)!=null&&S.toLocaleLowerCase().includes(x)&&!d.includes(e)||(_=e.platform)!=null&&_.toLocaleLowerCase().includes(x)&&!d.includes(e)||(b=e.publisher)!=null&&b.toLocaleLowerCase().includes(x)&&!d.includes(e)?e:null};return s.jsxs("section",{className:`space-y-6 transition-all duration-200 ${L&&f&&"ml-[210px]"}`,children:[s.jsxs("form",{className:"flex gap-2 items-center border h-[42px] rounded-xl pr-2 w-5/6 mx-auto",onSubmit:y,children:[s.jsx("input",{type:"text",value:r,placeholder:"Search for free games",className:"flex-1 bg-midnightBlue h-full rounded-l-xl px-2 text-xs placeholder:text-sm placeholder:text-gray-200",onChange:t=>u(t.target.value)}),s.jsx("button",{className:"flex-grow-0",children:s.jsx("img",{src:"/SortedGames/icons/search-icon-without-circle.svg",alt:"search icon",className:"size-6"})})]}),s.jsx(j.Suspense,{fallback:s.jsx(D,{position:"static",loader:"smallerLoaderAnimation"}),children:s.jsxs("div",{className:"text-xl space-y-2",children:[h&&s.jsxs("h1",{className:"text-base text-center sm:text-lg sm:text-start px-4",children:["Your search: ",h]}),a&&s.jsx("div",{className:"pt-10",children:s.jsx(D,{loader:"smallerLoaderAnimation",position:"static"})}),s.jsx("ul",{className:"card-grid px-4",children:i.map((t,e)=>(e===i.length-1&&a&&c(!1),E(h,t)===null||e>g&&r===""?null:s.jsx("li",{className:"",children:s.jsx(F,{card:t})},e)))})]})})]})};export{z as default};
